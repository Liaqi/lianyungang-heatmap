# 连云港市案件热力图分析系统

## 功能特点

### 🗺️ 地图功能
- **连云港市地图视角**：专注于连云港市区域的地图显示
- **地图缩放**：支持10-18级缩放，方便查看不同精度的热力分布
- **边界限制**：限制地图范围在连云港市区域内，避免误操作

### 🔥 热力图功能
- **实时热力显示**：基于案件密度生成彩色热力图
- **多级热力强度**：绿色（低密度）→ 黄色（中密度）→ 红色（高密度）
- **热力点点击**：点击热力点可查看详细案件信息

### 📊 筛选功能
- **案件类别筛选**：支持按案件类别进行筛选（盗窃、殴打他人、诈骗案等）
- **时间范围筛选**：支持按时间范围筛选（今天、本周、本月、本季度、本年）
- **实时统计**：筛选后实时更新统计信息

### 📈 统计信息
- **总案件数**：显示数据中的总案件数量
- **当前显示**：显示筛选后的案件数量
- **案件类别数**：显示当前筛选条件下的案件类别数量
- **覆盖区域**：计算并显示案件覆盖的地理区域面积

### 🎨 界面设计
- **现代化UI**：采用渐变背景和毛玻璃效果
- **响应式布局**：左侧控制面板，右侧地图显示
- **美观配色**：紫色渐变主题，符合专业应用风格
- **交互反馈**：按钮悬停效果和加载动画

## 数据要求

Excel文件应包含以下列：
- `经度`：案件发生位置的经度坐标
- `纬度`：案件发生位置的纬度坐标
- `案件类别`：案件的分类信息
- `处警时间`：案件处理时间
- `案发时间下限`：案件发生时间范围下限
- `案发时间上限`：案件发生时间范围上限

## 使用方法

### 1. 准备数据
确保 `temp.xlsx` 文件在项目根目录下，包含上述必要列。

### 2. 生成数据文件
```bash
python read_excel.py
```
这将生成 `data.json` 文件供前端使用。

### 3. 启动应用
```bash
python server.py
```
服务器将在 `http://localhost:8000` 启动，并自动打开浏览器。

### 4. 使用应用
- **查看热力图**：页面加载后自动显示所有案件的热力分布
- **筛选数据**：使用左侧面板的筛选条件进行数据筛选
- **查看详情**：点击热力点查看具体案件信息
- **缩放地图**：使用鼠标滚轮或地图控件进行缩放

## 技术栈

- **前端**：HTML5 + CSS3 + JavaScript
- **地图库**：Leaflet.js + Leaflet.heat
- **数据处理**：Python + pandas
- **服务器**：Python HTTP Server

## 文件说明

- `index.html`：主应用页面
- `server.py`：HTTP服务器
- `read_excel.py`：Excel数据读取和转换脚本
- `temp.xlsx`：原始数据文件
- `data.json`：转换后的JSON数据文件

## 注意事项

1. 确保Excel文件中的经纬度坐标准确
2. 时间格式应为标准格式（YYYY-MM-DD HH:MM:SS）
3. 案件类别应保持一致，避免重复或相似类别
4. 建议在Chrome、Firefox等现代浏览器中使用

## 扩展功能

可以根据需要添加以下功能：
- 时间轴播放功能
- 案件趋势分析图表
- 导出功能
- 多图层叠加显示
- 实时数据更新 